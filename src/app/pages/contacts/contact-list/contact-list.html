<!-- contact-list.html -->

<main class="contact-list">
  <app-contact-add-form *ngIf="isContactModalOpen" (added)="onAdded()" (closed)="closeModal()"></app-contact-add-form>

  <header class="sticky-top">
    <ui-button variant="primary" (click)="openModal()">
      Add new contact
      <img src="assets/icons/person-add-white-32px.svg" alt="" aria-hidden="true" />
    </ui-button>

    <app-input-field type="text" label="Search" placeholder="Search contacts" icon="assets/icons/search-32px.svg"
      [error]="searchError"
      (inputChange)="onSearchInput($event)"
    />
  </header>

  @for (group of groups; track group.letter) {
    <section class="contacts">
      <header>
        <abbr class="letter">{{ group.letter }}</abbr>
      </header>

      <hr />

      <ul>
        @for (c of group.contacts; track c.id) {
          <li
            class="contacts__item"
            (click)="select.emit(c)"
            [class.Active]="selectedId === c.id"
          >
            <abbr
              class="initialism d-flex d-inline-flex align-items-center justify-content-center rounded-circle"
              [title]="c.name"
              [style.background]="c.color"
            >
              {{ c.initials }}
            </abbr>
            <dl>
              <dt class="contacts__name">{{ c.name }}</dt>
              <dd class="contacts__email fs-6">{{ c.email }}</dd>
            </dl>
          </li>
        }
      </ul>
    </section>
  }
</main>
